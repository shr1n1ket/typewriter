<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Typewriter</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Font -->
    <link href="https://fonts.googleapis.com/css2?family=Courier+Prime&display=swap" rel="stylesheet">

    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Courier Prime', monospace;
            background: #f5f5f5;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .typewriter-container {
            width: 850px;
            max-width: 95vw;
        }

        .paper-holder {
            background: #dcdcdc;
            padding: 20px;
            border-radius: 8px 8px 0 0;
            box-shadow: 0 -5px 20px rgba(0,0,0,0.15);
        }

        .paper {
            background: #fff;
            height: 500px;
            padding: 40px;
            overflow: hidden;
            box-shadow: inset 0 0 5px rgba(0,0,0,0.1);
        }

        .paper-header {
            font-size: 11px;
            color: #666;
            margin-bottom: 20px;
            border-bottom: 1px solid #ddd;
            padding-bottom: 8px;
            letter-spacing: 1px;
        }

        .paper-content {
            font-size: 16px;
            line-height: 28px;
            white-space: pre-wrap;
            transform: translateY(0);
            transition: transform 0.15s ease-out;
        }

        .cursor {
            display: inline-block;
            width: 2px;
            height: 20px;
            background: #333;
            animation: blink 1s infinite;
            vertical-align: bottom;
        }

        @keyframes blink {
            0%, 50% { opacity: 1; }
            51%, 100% { opacity: 0; }
        }

        .typewriter-body {
            background: #a8c5d9;
            padding: 25px;
            border-radius: 0 0 15px 15px;
            box-shadow: 0 12px 40px rgba(0,0,0,0.3);
        }

        .brand {
            text-align: center;
            letter-spacing: 6px;
            font-size: 14px;
            margin-bottom: 15px;
            color: rgba(255,255,255,0.7);
        }

        .keyboard {
            display: flex;
            flex-direction: column;
            gap: 6px;
            align-items: center;
        }

        .row {
            display: flex;
            gap: 6px;
        }

        .key {
            width: 42px;
            height: 42px;
            border-radius: 50%;
            background: #f1f1f1;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 11px;
            cursor: pointer;
            box-shadow: 0 3px 0 #aaa;
            user-select: none;
        }

        .key:active {
            transform: translateY(3px);
            box-shadow: none;
        }

        .space {
            width: 260px;
            border-radius: 20px;
        }

        .controls {
            position: fixed;
            bottom: 30px;
            right: 30px;
            display: flex;
            gap: 14px;
        }

        .control-btn {
            width: 55px;
            height: 55px;
            background: #f4f1e8;
            border: none;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 15px rgba(0,0,0,0.15);
        }

        .control-btn img {
            width: 26px;
            pointer-events: none;
        }
    </style>
</head>
<body>

<div class="typewriter-container">
    <div class="paper-holder">
        <div class="paper">
            <div class="paper-header" id="dateOnly"></div>
            <div class="paper-content" id="paper">
                <span class="cursor"></span>
            </div>
        </div>
    </div>

    <div class="typewriter-body">
        <div class="brand">OMONT</div>

        <div class="keyboard">
            <div class="row">
                <div class="key">Q</div><div class="key">W</div><div class="key">E</div>
                <div class="key">R</div><div class="key">T</div><div class="key">Y</div>
                <div class="key">U</div><div class="key">I</div><div class="key">O</div>
                <div class="key">P</div>
            </div>
            <div class="row">
                <div class="key">A</div><div class="key">S</div><div class="key">D</div>
                <div class="key">F</div><div class="key">G</div><div class="key">H</div>
                <div class="key">J</div><div class="key">K</div><div class="key">L</div>
            </div>
            <div class="row">
                <div class="key">Z</div><div class="key">X</div><div class="key">C</div>
                <div class="key">V</div><div class="key">B</div><div class="key">N</div>
                <div class="key">M</div>
            </div>
            <div class="row">
                <div class="key space">SPACE</div>
            </div>
        </div>
    </div>
</div>

<div class="controls">
    <button class="control-btn" id="saveBtn">
        <img src="download.png" alt="Save">
    </button>
    <button class="control-btn" id="colorBtn">
        <img src="palette.png" alt="Color">
    </button>
</div>

<script>
    const paper = document.getElementById('paper');
    let content = '';

    const sounds = {
        key: new Audio('sounds/key.mp3'),
        enter: new Audio('sounds/enter.mp3'),
        backspace: new Audio('sounds/backspace.mp3'),
        space: new Audio('sounds/space.mp3')
    };

    function play(sound) {
        if (!sounds[sound]) return;
        sounds[sound].currentTime = 0;
        sounds[sound].play();
    }

    function updatePaper() {
        paper.innerHTML = content + '<span class="cursor"></span>';
        const lines = content.split('\n').length;
        const offset = Math.max(0, (lines - 10) * 28);
        paper.style.transform = `translateY(-${offset}px)`;
    }

    document.addEventListener('keydown', e => {
        if (e.key === 'Backspace') {
            play('backspace');
            content = content.slice(0, -1);
        } else if (e.key === 'Enter') {
            play('enter');
            content += '\n';
        } else if (e.key === ' ') {
            play('space');
            content += ' ';
        } else if (e.key.length === 1) {
            play('key');
            content += e.key;
        }
        updatePaper();
    });

    document.getElementById('saveBtn').onclick = () => {
        const blob = new Blob([content], { type: 'text/plain' });
        const link = document.createElement('a');
        link.href = URL.createObjectURL(blob);
        link.download = `letter_${Date.now()}.txt`;
        link.click();
    };

    function updateDate() {
        const now = new Date();
        const options = {
            weekday: 'long',
            year: 'numeric',
            month: 'long',
            day: 'numeric'
        };
        document.getElementById('dateOnly').textContent =
            now.toLocaleDateString('en-US', options);
    }

    updateDate();
</script>

</body>
</html>
